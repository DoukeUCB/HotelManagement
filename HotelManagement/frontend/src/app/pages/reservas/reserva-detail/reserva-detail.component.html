<div class="main-container">

  <header class="reservation-header">
    <a routerLink="/reservas" class="link-back">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z" />
      </svg>
      Volver
    </a>
    
    <h1>Detalle de reserva</h1>
  </header>

  <div *ngIf="loading()" class="loading-state">Cargando...</div>

  <div *ngIf="!loading() && error()" class="error-state">{{ error() }}</div>

  <section *ngIf="!loading()" class="reservation-details-content">
     
    <ng-container *ngIf="header() as h; else sinHeader">
      
      <div class="card reservation-summary">
        <div class="summary-top-row">
          <div>
            <h3 class="reservation-id">Reserva: #{{ h.reservaId }}</h3>
            <div class="guest-info">
              Huésped: <strong>{{ h.nombreHuesped }}</strong> | Cant. huéspedes:
              {{ h.cantidadHuespedes }}
            </div>
          </div>
          <div class="status-badge">Hab. {{ h.numeroHabitacion }}</div>
        </div>

        <div class="reservation-dates-total">
          <div class="date-item">
            <label>Entrada</label>
            <div class="date-value">
              {{ h.fechaEntrada | date:'dd/MM/yyyy' }}
            </div>
          </div>
          <div class="date-item">
            <label>Salida</label>
            <div class="date-value">
              {{ h.fechaSalida | date:'dd/MM/yyyy' }}
            </div>
          </div>
          <div class="total-item">
            <label>Total de la Reserva</label>
            <div class="total-value">
              {{ total() | number:'1.2-2' }}
            </div>
          </div>
        </div>
      </div>

      <h2 class="section-title">Ítems de la Reserva</h2>
      
      <div class="data-table" *ngIf="detalles().length; else noItems">
        <div class="table-header">
          <div>Hab.</div>
          <div>Huésped</div>
          <div>Entrada</div>
          <div>Salida</div>
          <div class="align-right">Precio Total</div>
        </div>

        <div class="table-row" *ngFor="let d of detalles()">
          <div>{{ d.numeroHabitacion }}</div>
          <div>{{ d.nombreHuesped }}</div>
          <div>{{ header()?.fechaEntrada | date:'dd/MM/yyyy' }}</div>
          <div>{{ header()?.fechaSalida | date:'dd/MM/yyyy' }}</div>
          <div class="align-right">{{ d.precioTotal | number:'1.2-2' }}</div>
        </div>
      </div>
      
      <ng-template #noItems>
        <div class="empty-state">No hay detalles para esta reserva.</div>
      </ng-template>
      
    </ng-container>

    <ng-template #sinHeader>
      <div class="empty-state">
        No se encontró información para esta reserva.
      </div>
    </ng-template>
  </section>
</div>